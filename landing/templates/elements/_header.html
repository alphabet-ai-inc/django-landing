{% load mptt_tags element_tags %}
  <h{{ element.props.level }} class="{{ element.css_classes }}" {% if element.html_attrs.style or element.props.background_image %}style="{% if element.props.background_image %}background-image: url({{ element.props.background_image }});{% endif %}{% if element.html_attrs.style %}{{ element.html_attrs.style }}{% endif %}"{% endif %}>
      {{ element.content|safe }}
      {% if element.children.exists %}
          {% recursetree element.children.all %}
              {% with element=node template_path=node|get_partial_template %}
                  {% include template_path %}
              {% endwith %}
              {% if not node.is_leaf_node and node.type not in 'container,card,grid,section,list' %}
                  {{ children }}
              {% endif %}
          {% endrecursetree %}
      {% endif %}
  </h{{ element.props.level }}>